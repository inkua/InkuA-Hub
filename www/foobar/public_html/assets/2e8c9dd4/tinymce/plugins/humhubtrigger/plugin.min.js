/**
 * plugin.js
 *
 * @link https://www.humhub.org/
 * @copyright Copyright (c) 2022 HumHub GmbH & Co. KG
 * @license https://www.humhub.com/licences
 * @author Lucas Bartholemy <lucas@bartholemy.com>
 */
tinymce.PluginManager.add("humhubtrigger",(function(e,t){const n=e.getParam("humhubTrigger"),r=()=>n.selector&&$(n.selector).length,i=()=>r&&$(n.selector).data("humhubFileUpload")?$(n.selector).data("humhubFileUpload"):null;const u={icon:n.icon,text:n.text,onAction:function(){r&&$(n.selector).trigger(n.event)}};e.ui.registry.addButton("humhubtrigger",u),e.ui.registry.addMenuItem("humhubtrigger",u),i()&&i().on("humhub:file:uploadEnd",(function(t,n){n._response.result.files instanceof Array&&n._response.result.files.length&&e.insertContent(function(e){let t="\n";return e.forEach((function(e){void 0!==e.url&&void 0!==e.mimeType&&(0===e.mimeType.indexOf("image/")?t+='<img src="'+e.url+'" class="img-responsive">':t+='<a href="'+e.url+'" target="_blank">'+(void 0===e.name?e.url:e.name)+"</a>",t+="\n")})),t}(n._response.result.files))}))}));
