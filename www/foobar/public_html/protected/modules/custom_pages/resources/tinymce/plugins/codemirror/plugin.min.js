tinymce.PluginManager.requireLangPack("codemirror"),tinymce.PluginManager.add("codemirror",(function(e,o){function c(){e.focus(),e.selection.collapse(!0);var c=e.options.get("codemirror")??{};c.saveCursorPosition&&e.selection.setContent('<span style="display: none;" class="CmCaReT">&#x0;</span>');var n=c.width??800,t=c.height??600,i=c.fullscreen??!1,r=tinymce.majorVersion<5?[{text:"Ok",subtype:"primary",onclick:function(){document.querySelectorAll(".mce-container-body>iframe")[0].contentWindow.submit(),l.close()}},{text:"Cancel",onclick:"close"}]:[{type:"custom",text:"Ok",name:"codemirrorOk",primary:!0},{type:"cancel",text:"Cancel",name:"codemirrorCancel"}],a={title:"HTML source code",url:o+"/source.html",width:n,height:t,resizable:!0,maximizable:!0,fullScreen:i,saveCursorPosition:!1,buttons:r};tinymce.majorVersion>=5&&(a.onAction=function(e,o){"codemirrorOk"===o.name&&(document.querySelectorAll(".tox-dialog__body-iframe iframe")[0].contentWindow.submit(),l.close())});var l=tinymce.majorVersion<5?e.windowManager.open(a):e.windowManager.openUrl(a);i&&l.fullscreen(!0)}tinymce.majorVersion<5?(e.addButton("code",{title:"Source code",icon:"code",onclick:c}),e.addMenuItem("code",{icon:"code",text:"Source code",context:"tools",onclick:c})):(e.ui.registry.addButton("code",{icon:"sourcecode",title:"Source code",tooltip:"Source code",onAction:c}),e.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:c,context:"tools"}))}));
